<md-card>
  <md-card-content>
    <a layout layout-align="start center" ng-click="$ctrl.showMore = !$ctrl.showMore">
      <h3 flex>{{$ctrl.model.name}}</h3>
      <md-button class="md-icon-button"
                 ng-class="{'is-expanded': $ctrl.showMore}">
        <md-icon>expand_more</md-icon>
      </md-button>
    </a>
    <div ng-if="$ctrl.showMore && !$ctrl.isEditing">
      <h5>Description</h5>
      <p>{{$ctrl.model.description || "none"}}</p>
      <h5>Months</h5>
      <md-chips ng-model="$ctrl.model.months" readonly="true"></md-chips>
    </div>
    <form name="$ctrl.ingredientForm" ng-if="$ctrl.showMore && $ctrl.isEditing" layout="column" novalidate>
      <md-input-container>
        <label>Name <span class="text--warning">*</span></label>
        <input ng-model="$ctrl.model.name" ng-required="true">
      </md-input-container>
      <md-input-container>
        <label>Description</label>
        <textarea ng-model="$ctrl.model.description" columns="1" md-maxlength="100" rows="5"></textarea>
      </md-input-container>
      <md-chips ng-model="$ctrl.model.months"
                md-autocomplete-snap
                md-transform-chip="$ctrl.transformToUpper($chip)">
        <md-autocomplete
            md-search-text="$ctrl.monthText"
            md-items="month in $ctrl.queryMonths($ctrl.monthText)"
            md-item-text="month"
            md-select-on-match="true"
            placeholder="Months...">
          <span md-highlight-text="$ctrl.monthText">{{month}}</span>
          <md-not-found>No matches found.</md-not-found>
        </md-autocomplete>
      </md-chips>
    </form>
  </md-card-content>
  <md-card-actions ng-if="$ctrl.showMore"
                   layout layout-align="end center">
    <md-button class="md-warn" ng-if="!$ctrl.isEditing" ng-click="$ctrl.delete()">Delete</md-button>
    <md-button ng-if="!$ctrl.isEditing" ng-click="$ctrl.isEditing = true">Edit</md-button>
    <md-button ng-if="$ctrl.isEditing" ng-click="$ctrl.isEditing = false">Cancel</md-button>
    <md-button ng-if="$ctrl.isEditing"
               ng-disabled="$ctrl.ingredientForm.$invalid"
               ng-click="$ctrl.save()">Save</md-button>
  </md-card-actions>
</md-card>
